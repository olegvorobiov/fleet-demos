defaultNamespace: cattle-monitoring-system
helm:
  releaseName: rancher-monitoring
  chart: rancher-monitoring
  repo: https://charts.rancher.io
  version: 103.0.4+up45.31.1
  values:
    global:
      cattle:
        clusterId: '${ index .ClusterLabels "management.cattle.io/cluster-name" }'
        clusterName: '${ index .ClusterLabels "management.cattle.io/cluster-display-name" }'
    # prometheus:
    #   prometheusSpec:
    #     resources:
    #       limits:
    #         cpu: 1500m
    #         memory: 3500Mi
    #       requests:
    #         cpu: 750m
    #         memory: 1750Mi
    #     evaluationInterval: 1m
    #     scrapeInterval: 1m
    #     retentionSize: 10GiB

labels:
  app: rancher-monitoring

dependsOn:
  - selector:
      matchLabels:
        app: rancher-monitoring-crd

diff:
  comparePatches:
  - apiVersion: admissionregistration.k8s.io/v1
    kind: MutatingWebhookConfiguration
    name: rancher-monitoring-admission
    operations:
    - {"op": "remove", "path":"/webhooks/0"}
  - apiVersion: admissionregistration.k8s.io/v1
    kind: ValidatingWebhookConfiguration
    name: rancher-monitoring-admission
    operations:
    - {"op": "remove", "path":"/webhooks/0"}